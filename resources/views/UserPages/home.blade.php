@extends('UserPages.layout')  
@section('content')


<div class="container w-75 mx-auto bg-white"> 
   <h3 class="text-center font-weight-bold text-dark py-3">Rewind Charts</h3>
  <div class="row mx-auto shadow" style=""> 

         <div class="card px-3 pt-3 bg-white">
         <div class="row">
         <div class="col-sm-4"> 
          <p class="bar" style="width:100%; height:15px;"></p> 
        </div> 
         <div class="col-sm-4"> <h4 class="text-center font-weight-bold text-dark">Rewind Top 40</h4> </div>
         <div class="col-sm-4"> <p class="bar" style="width:100%; height:15px;"></p> </div>
         </div>

         <div class="row my-3">

         <div class="col-sm-4"> 
         <div class="card shadow">
          <div class="row">
          <div class="col-sm-5 py-2">
            <div class="border border-dark mx-1">
              <img src="images/user.jpg" style="width:100%;"></div>
            
          </div>
          <div class="col-sm-7 py-2">
            <div class="row text-dark "> <h3 class="font-weight-bold">1</h3> &nbsp;&nbsp;
             <span style="height: 24px; padding-left: 6px;padding-right: 6px;" class="bg-secondary rounded-circle mt-1"><i style="font-size: 12px;"class="fa fa-arrow-right text-light"></i></span></div>
            <div class="row"> 
              <h6 class="text-center text-dark font-weight-bold">Rich Men North</h6>
              <p class="text-secondary font-weight-bold small">Oliver Anthony Music</p>
              </div>
          </div>
          </div>

          <div class="row">
          <div class="col-sm-4 pr-0 border-white border-right">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">LAST WEEK</p>
            <h5 class="text-dark text-center font-weight-bold">1</h5>
            </div>
            </div>
          </div>

            <div class="col-sm-4 px-0 border-white border-right">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">WEEKS AT NO 1</p>
            <h5 class="text-dark text-center font-weight-bold">2</h5>
            </div>
            </div>
          </div>

            <div class="col-sm-4 pl-0">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">WEEKS ON CHART</p>
            <h5 class="text-dark text-center font-weight-bold">3</h5>
            </div>
            </div>
          </div>

          </div>

          
           

         </div>
          </div> 


               <div class="col-sm-4"> 
         <div class="card shadow">
          <div class="row">
          <div class="col-sm-5 py-2">
            <div class="border border-dark mx-1">
              <img src="images/user.jpg" style="width:100%;"></div>
            
          </div>
          <div class="col-sm-7 py-2">
            <div class="row text-dark "> <h3 class="font-weight-bold">1</h3> &nbsp;&nbsp;
             <span style="height: 24px; padding-left: 6px;padding-right: 6px;" class="bg-secondary rounded-circle mt-1"><i style="font-size: 12px;"class="fa fa-arrow-right text-light"></i></span></div>
            <div class="row"> 
              <h6 class="text-center text-dark font-weight-bold">Rich Men North</h6>
              <p class="text-secondary font-weight-bold small">Oliver Anthony Music</p>
              </div>
          </div>
          </div>

          <div class="row">
          <div class="col-sm-4 pr-0 border-white border-right">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">LAST WEEK</p>
            <h5 class="text-dark text-center font-weight-bold">1</h5>
            </div>
            </div>
          </div>

            <div class="col-sm-4 px-0 border-white border-right">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">WEEKS AT NO 1</p>
            <h5 class="text-dark text-center font-weight-bold">2</h5>
            </div>
            </div>
          </div>

            <div class="col-sm-4 pl-0">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">WEEKS ON CHART</p>
            <h5 class="text-dark text-center font-weight-bold">3</h5>
            </div>
            </div>
          </div>

          </div>

          
           

         </div>
          </div>


               <div class="col-sm-4"> 
         <div class="card shadow">
          <div class="row">
          <div class="col-sm-5 py-2">
            <div class="border border-dark mx-1">
              <img src="images/user.jpg" style="width:100%;"></div>
            
          </div>
          <div class="col-sm-7 py-2">
            <div class="row text-dark "> <h3 class="font-weight-bold">1</h3> &nbsp;&nbsp;
             <span style="height: 24px; padding-left: 6px;padding-right: 6px;" class="bg-secondary rounded-circle mt-1"><i style="font-size: 12px;"class="fa fa-arrow-right text-light"></i></span></div>
            <div class="row"> 
              <h6 class="text-center text-dark font-weight-bold">Rich Men North</h6>
              <p class="text-secondary font-weight-bold small">Oliver Anthony Music</p>
              </div>
          </div>
          </div>

          <div class="row">
          <div class="col-sm-4 pr-0 border-white border-right">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">LAST WEEK</p>
            <h5 class="text-dark text-center font-weight-bold">1</h5>
            </div>
            </div>
          </div>

            <div class="col-sm-4 px-0 border-white border-right">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">WEEKS AT NO 1</p>
            <h5 class="text-dark text-center font-weight-bold">2</h5>
            </div>
            </div>
          </div>

            <div class="col-sm-4 pl-0">
            <div class="small_div text-center">
            <div class="d-inline-block m-auto py-2">
            <p style="font-size:9px;font-family: fantasy;" class="mb-1 text-center font-weight-light small text-info">WEEKS ON CHART</p>
            <h5 class="text-dark text-center font-weight-bold">3</h5>
            </div>
            </div>
          </div>

          </div>

          
           

         </div>
          </div>
         
         </div>


         <div class="row py-3"> 
            <button style="background:black;" class="font-weight-bold w-100 text-light m-auto text-center">VIEW CHART</button>
          </div>

      </div>
      </div>


<!-- <table class="table tabil mb-4 text-white">
  <thead>
    <tr>
      <th scope="col">Position</th>
      <th scope="col">Artist</th>
      <th scope="col">Song</th>
      <th scope="col">Move</th>
    
    </tr>
  </thead>
  <tbody id="songs">

   @foreach($static20 as $static) <?php $cnt=0; $duplicate =0; ?>
   @foreach($lastDay as $yester)
   

@if($static->song == $yester->song)  
@if($static->position < $yester->position) 
<?php $pos='up'; $cnt++;?>
@elseif($static->position == $yester->position) 
<?php  $pos='-'; $cnt++;?>
@else <?php $pos='down'; $cnt++; ?>
@endif

@foreach($static20 as $check)
@if($check->song == $static->artist)
<?php $duplicate =1; ?>
 @endif @endforeach

   @if($duplicate==0)
	   

	   <tr id="loading">
     
      <td scope="row" class="text-center"> {{$static->position}} </td>
       <td scope="row" class="text-center"> {{$static->artist}} </td>
        <td scope="row" class="text-center"> {{$static->song}} </td>
         <td id="move{{$static->id}}" scope="row" class="text-center small">
          @if($pos=='up') <i class="fas fa-arrow-alt-circle-up text-success fa-2x"></i>
          @elseif($pos=='down') <i class="fas fa-arrow-alt-circle-down text-danger fa-2x"></i>
          @else -
          @endif 
        </td>
    </tr> 

	
	@endif


   @endif
   @endforeach

@if($cnt==0)

    <tr id="loading">
     
      <td scope="row" class="text-center"> {{$static->position}} </td>
       <td scope="row" class="text-center"> {{$static->artist}} </td>
        <td scope="row" class="text-center"> {{$static->song}} </td>
         <td id="move{{$static->id}}" scope="row" class="text-center small"> <i class="fas fa-arrow-alt-circle-up text-success fa-2x"></i> </td>
    </tr>

    
   @endif
    @endforeach

    
  </tbody>
</table>
 

         <div class="col-md-3"> </div>
           <div class="col-sm-6 text-center" style="background-image: url('images/rewind.png');background-repeat:no-repeat; max-height: 600px; background-size:contain; background-position:center;">
           

          <h2 class="px-4 w-100 d-block  text-left text-dark">

                 

                   @if(Session::has('reset'))
                   <div class="alert alert-success" role="alert">
                        <p style="font-size: 14px"; class="m-0">{{Session::get('reset')}}   @php Session::forget('reset'); @endphp </p> </div>  
                    @endif


                    
              @if(Session::has('login_err'))
                   <div class="alert alert-primary" role="alert">
                        <p style="color: red;font-size: 14px"; class="font-weight-bold m-0">{{Session::get('login_err')}}   @php Session::forget('login_err'); @endphp </p>   </div>  
              @endif
                   


                @if(Session::has('email'))
                   <div class="alert alert-danger" role="alert">
                        <p style="font-size: 14px"; class="m-0">{{Session::get('email')}}   @php Session::forget('email'); @endphp </p>   </div>  
              @endif

                 

            
             

           </div>  -->   
          

<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>


<script type="text/javascript">
/*
$(window).on("load", getSongs);

function getSongs() {
  var key, value,i=1, j=1,tops=1,dur,p=1;
  var BreakException = {};
  //var stageName=document.getElementById('myStageName').value;

     $.ajax({
            url:"move", 
            method:"GET",
            dataType: 'json',
          success: function(data) {  
            const songs20=data.data;
            const songs_all=data.data2;
            const today=data.today;
            const artists=data.artists;
            const all_titles=data.all_titles;


// Top 20 chart
           Object.entries(songs20).forEach(entry => {
           const [title, pos] = entry;
           console.log(title,pos);
           if(pos=='up')
           $('#move'+p).html('<i class="fas fa-arrow-alt-circle-up text-success fa-2x"></i>'); 
           if(pos=='down')
           $('#move'+p).html('<i class="fas fa-arrow-alt-circle-down text-danger fa-2x"></i>'); 
          if(pos=='not')
           $('#move'+p).html('-'); 
           p++;
          
            
          }); 

            
          },
          error:function(error)
          {console.log(error);}

        });
}
*/

</script>


          @endsection
        
       

